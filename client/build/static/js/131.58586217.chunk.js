(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[131,107],{115:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return w}));var n=a(442),r=a.n(n),i=a(801),s=a(443),o=a(872),l=a(11),c=a(12),u=a(14),p=a(13),f=a(0),m=a.n(f),d=a(393),g=(a(67),a(26)),h=a.n(g),v=(a(66),a(802),a(7));a(188);function y(e){var t=Date.now();console.log("date: "+t);var a=t+"_"+e.name;return new File([e],a,{type:e.type,lastModified:e.lastModified})}var w=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(e){try{n.setState({fileImgs:[].concat(Object(o.a)(n.state.fileImgs),[URL.createObjectURL(e.target.files[0])]),fileArr:[].concat(Object(o.a)(n.state.fileArr),[e.target.files[0]]),uploadMessage:""})}catch(t){n.setState({fileImgs:[],fileArr:[],uploadMessage:"An error occured while uploading your photos. Please try again."})}},n.handleUpload=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,s,o,l,c,u,p,f,m,d,g,w,b,j,E;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({uploadMessage:"Please wait for your images to finish uploading before proceeding to the next step. \n        \n        We will notify you when the upload is complete, thank you for your patience!"}),a=n.state.fileArr,console.log(a),s=Object(i.a)(a),e.prev=4,s.s();case 6:if((o=s.n()).done){e.next=60;break}return l=y(l=o.value),c="",console.log("new file"),console.log(l),u=l.name.split("."),p=u[0],f=u[1],console.log("Preparing the upload"),m=localStorage.getItem("token"),d={headers:{Authorization:"Bearer ".concat(m)}},e.prev=18,e.next=21,h.a.post(v.REMOTE_HOST+"/aws/signS3_upload",{bucket:"resteasy-user-uploads",fileName:p,fileType:f},d);case 21:return g=e.sent,w=g.data,b=w.signedRequest,j=w.url,n.setState({url:j}),c=w.fileName,console.log("Recieved a signed request "+b),console.log(c),E={headers:{"Content-Type":f}},e.prev=30,e.next=33,h.a.put(b,l,E);case 33:return e.sent,n.setState({success:!0}),console.log("add to database: "+c),e.prev=36,e.next=39,h.a.post(v.REMOTE_HOST+"/aws/addImgDB",{memoryName:"testMemory",imgID:c},d);case 39:e.sent,e.next=46;break;case 42:throw e.prev=42,e.t0=e.catch(36),console.log("error "+JSON.stringify(e.t0)),new Error(e.t0);case 46:e.next=52;break;case 48:throw e.prev=48,e.t1=e.catch(30),console.log("ERROR "+JSON.stringify(e.t1)),new Error(e.t1);case 52:e.next=58;break;case 54:throw e.prev=54,e.t2=e.catch(18),console.log(JSON.stringify(e.t2.response)),new Error(e.t2);case 58:e.next=6;break;case 60:e.next=65;break;case 62:e.prev=62,e.t3=e.catch(4),s.e(e.t3);case 65:return e.prev=65,s.f(),e.finish(65);case 68:document.getElementById("choose-file").value=null,n.setState({fileImgs:[],fileArr:[],uploadMessage:"Image(s) uploaded! You can add more or go to the next step."});case 70:case"end":return e.stop()}}),e,null,[[4,62,65,68],[18,54],[30,48],[36,42]])})));return function(t){return e.apply(this,arguments)}}(),n.state={success:!1,url:"",fileName:"",fileImgs:[],fileArr:[],uploadMessage:""},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t={borderRadius:"10px",margin:"10px",width:"100px"},a=this.state.fileImgs.map((function(e){return m.a.createElement("img",{key:e,src:e,style:{height:"60px",width:"60px",objectFit:"cover",margin:"10px"}})}));return m.a.createElement("div",{style:{width:"100%",textAlign:"center"}},m.a.createElement("div",{className:"create-text",style:{fontSize:"1.5em",marginBottom:"0.5em"}},"Share some of your favourite memories"),m.a.createElement("input",{onChange:this.handleChange,ref:function(t){e.uploadInput=t},type:"file",multiple:!1,id:"choose-file",style:{marginBottom:"20px"}}),m.a.createElement("br",null),this.state.uploadMessage,m.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},m.a.createElement("br",null),a),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("button",{className:"upload",onClick:this.handleUpload},"UPLOAD PHOTO(S)"),m.a.createElement("br",null),m.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"1em"}},m.a.createElement(d.a,{type:"primary",onClick:this.props.prev,style:t},"Previous"),m.a.createElement(d.a,{type:"primary",onClick:this.props.next,style:t},"Skip/Next")))}}]),a}(m.a.Component)},66:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var n=a(442),r=a.n(n),i=a(443),s=a(11),o=a(12),l=a(14),c=a(13),u=a(0),p=a.n(u),f=a(755),m=a(889),d=a(891);function g(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var h=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={previewVisible:!1,previewImage:"",previewTitle:"",fileList:[{uid:"-1",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-2",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-3",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-4",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-5",name:"image.png",status:"error"}]},e.handleCancel=function(){return e.setState({previewVisible:!1})},e.handlePreview=function(){var t=Object(i.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.url||a.preview){t.next=4;break}return t.next=3,g(a.originFileObj);case 3:a.preview=t.sent;case 4:e.setState({previewImage:a.url||a.preview,previewVisible:!0,previewTitle:a.name||a.url.substring(a.url.lastIndexOf("/")+1)});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.fileList;console.log(e.state),e.setState({fileList:a})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,r=e.previewTitle,i=p.a.createElement("div",null,p.a.createElement(d.a,null),p.a.createElement("div",{className:"ant-upload-text"},"Upload"));return p.a.createElement("div",{className:"clearfix"},p.a.createElement(f.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=8?null:i),p.a.createElement(m.a,{visible:t,title:r,footer:null,onCancel:this.handleCancel},p.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),a}(p.a.Component)},67:function(e,t,a){"use strict";a.r(t),a.d(t,"uploadMedia",(function(){return r})),a.d(t,"saveStripeToken",(function(){return i}));var n=a(53),r=function(e){},i=function(e,t){var a=new FormData;a.append("token_id",e),a.append("payee_email",t);var r=new n.Deferred;return n.ajax({url:"/api/saveStripeToken/",type:"POST",contentType:!1,data:a,cache:!1,processData:!1}).done((function(e){r.resolve(e)})).fail((function(e,t,a){r.reject(e)})),r.promise()}},829:function(e,t){},830:function(e,t){},837:function(e,t){},839:function(e,t){}}]);
//# sourceMappingURL=131.58586217.chunk.js.map