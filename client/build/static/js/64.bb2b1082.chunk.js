/*! For license information please see 64.bb2b1082.chunk.js.LICENSE.txt */
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[64,91,117,139,162],{189:function(e,t,a){},190:function(e,t,a){},305:function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var l=typeof n;if("string"===l||"number"===l)e.push(n);else if(Array.isArray(n)&&n.length){var s=i.apply(null,n);s&&e.push(s)}else if("object"===l)for(var r in n)a.call(n,r)&&n[r]&&e.push(r)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},306:function(e,t,a){"use strict";function n(e,t){if(null==e)return{};var a,n,i={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}a.d(t,"a",(function(){return n}))},383:function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(n){"object"===typeof window&&(a=window)}e.exports=a},51:function(e,t,a){"use strict";a.r(t),a.d(t,"DragItemTypes",(function(){return n}));var n={IMAGE:"image"}},58:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var n=a(11),i=a(12),l=a(6),s=a(14),r=a(13),o=a(365),m=a(0),c=a.n(m),p=(a(190),a(24),a(51)),g=a(761),u=a(762);function d(e){var t=Object(g.a)({item:{type:p.DragItemTypes.IMAGE,rownum:e.rownum,colnum:e.colnum},collect:function(e){return{isDragging:!!e.isDragging()}}}),a=Object(o.a)(t,2),n=(a[0].isDragging,a[1]),i=Object(u.a)({accept:p.DragItemTypes.IMAGE,drop:function(t,a){return e.isMergeable(t.rownum,t.colnum,e.rownum,e.colnum)?e.promptMerge(t.rownum,t.colnum,e.rownum,e.colnum):e.swapTemplateItems(t.rownum,t.colnum,e.rownum,e.colnum)},collect:function(e){return{isOver:!!e.isOver()}}}),l=Object(o.a)(i,2),s=l[0].isOver,r=l[1];return c.a.createElement("div",{style:{height:e.height?e.height:"100%",width:"100%",padding:"0px",borderStyle:"none"},ref:n},c.a.createElement("div",{style:{height:"100%",filter:"blur("+(s?"5px":"0px")+") sepia("+(s?"100%":"0%")+")"},ref:r},e.children))}var h=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={height:e.height,rownum:e.rownum,colnum:e.colnum,img:e.img},i.swapTemplateItems=e.swapTemplateItems.bind(Object(l.a)(i)),i.togglePopupIsOpen=e.togglePopupIsOpen.bind(Object(l.a)(i)),i.sendClickedInfo=e.sendClickedInfo.bind(Object(l.a)(i)),i.isMergeable=e.isMergeable.bind(Object(l.a)(i)),i.promptMerge=e.promptMerge.bind(Object(l.a)(i)),i}return Object(i.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({height:e.height,rownum:e.rownum,colnum:e.colnum,img:e.img})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("button",{style:{height:this.state.height?this.state.height:"100%",width:"100%",padding:"0px",borderStyle:"none"},onClick:function(){e.togglePopupIsOpen(),e.sendClickedInfo(e.state.rownum,e.state.colnum,e.state.img)}},c.a.createElement(d,{height:this.state.height,rownum:this.state.rownum,colnum:this.state.colnum,swapTemplateItems:this.swapTemplateItems,style:{positiong:"relative",zIndex:"-1"},isMergeable:this.isMergeable,promptMerge:this.promptMerge},this.props.children)))}}]),a}(c.a.Component)},76:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return c}));var n=a(0),i=a.n(n),l=a(562);function s(e){var t=null;return e.large&&(t=i.a.createElement("button",{onClick:function(){e.breakInsert()}},"Break this section up.")),i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){e.changeLastImg("/static/media/image3.bc0d3b4d.jpg")}},"Add image"),i.a.createElement("button",{onClick:function(){e.changeLastImg("nonimage")}},"Add Memory"),i.a.createElement("button",{onClick:function(){e.changeLastImg("/static/media/image8.b4f3dc7f.png")}},"Add Spotify playlist"),t)}function r(e){return i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){e.clearLastClicked()}},"Delete this."),i.a.createElement("button",{onClick:function(){e.changeLastImg("/static/media/image3.bc0d3b4d.jpg")}},"Show a different image"),i.a.createElement("button",{onClick:function(){e.changeLastImg("nonimage")}},"Change to Memory"),i.a.createElement("button",{onClick:function(){e.changeLastImg("/static/media/image8.b4f3dc7f.png")}},"Change to Spotify playlist"))}function o(e){return i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){e.clearLastClicked()}},"Delete this."),i.a.createElement("button",{onClick:function(){e.changeLastImg("/static/media/image3.bc0d3b4d.jpg")}},"Change to image"),i.a.createElement("button",{onClick:function(){e.changeLastImg("nonimage")}},"Show a different Memory"),i.a.createElement("button",{onClick:function(){e.changeLastImg("/static/media/image8.b4f3dc7f.png")}},"Change to Spotify playlist"))}function m(e){var t=e.img;return""===t?i.a.createElement(s,{large:e.large,changeLastImg:e.changeLastImg,breakInsert:e.breakInsert}):"nonimage"===t?i.a.createElement(o,{clearLastClicked:e.clearLastClicked,changeLastImg:e.changeLastImg}):i.a.createElement(r,{clearLastClicked:e.clearLastClicked,changeLastImg:e.changeLastImg})}function c(e){var t;return t=e.popupCanMergeSwap?i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){e.mergeTemplateItems()}},"Merge"),i.a.createElement("button",{onClick:function(){e.swapTemplateItems()}},"Swap")):i.a.createElement(m,{img:e.lastClickedImg,large:e.lastClickedLarge,clearLastClicked:e.clearLastClicked,changeLastImg:e.changeLastImg,breakInsert:e.breakInsert}),i.a.createElement(l.a,{open:e.popupIsOpen,onClose:function(){e.togglePopupIsOpen()},style:{zIndex:"999999"}},t)}},77:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return o}));var n=a(0),i=a.n(n),l=a(356),s=a(409),r=(a(190),a(24),a(58));function o(e){var t=e.rowinfo.map((function(t){if(!t.exists)return null;var a=200+220*(t.height-1);return"nonimage"==t.img?i.a.createElement(l.a,{md:""+2*t.width,className:"padded",key:t.col},i.a.createElement(r.default,{swapTemplateItems:e.swapTemplateItems,rownum:e.rownum,colnum:t.col,img:t.img,togglePopupIsOpen:e.togglePopupIsOpen,sendClickedInfo:e.sendClickedInfo,isMergeable:e.isMergeable,promptMerge:e.promptMerge},i.a.createElement("div",{className:"center",style:{height:a,textAlign:"center",backgroundColor:"lightgrey"}},"memories (text) shared go here"))):""==t.img?i.a.createElement(l.a,{md:""+2*t.width,className:"padded",key:t.col},i.a.createElement(r.default,{swapTemplateItems:e.swapTemplateItems,rownum:e.rownum,colnum:t.col,img:t.img,togglePopupIsOpen:e.togglePopupIsOpen,sendClickedInfo:e.sendClickedInfo,isMergeable:e.isMergeable,promptMerge:e.promptMerge},i.a.createElement("div",{className:"center",style:{height:a,textAlign:"center",backgroundColor:"lightgreen"}},"Insert memory or media here, or drag to merge with another item",1!=t.height||1!=t.width?", or click to break up this section":""))):i.a.createElement(l.a,{md:2*t.width,className:"padded",key:t.col},i.a.createElement(r.default,{swapTemplateItems:e.swapTemplateItems,rownum:e.rownum,colnum:t.col,height:a,style:{zIndex:99999},togglePopupIsOpen:e.togglePopupIsOpen,sendClickedInfo:e.sendClickedInfo,img:t.img,isMergeable:e.isMergeable,promptMerge:e.promptMerge},i.a.createElement("img",{src:t.img,style:{height:a,width:"100%",objectFit:"cover"}})))}));return i.a.createElement(s.a,{className:"justify-content-md-center",style:{zIndex:e.zIndex}},i.a.createElement(l.a,{md:"1"}),i.a.createElement(l.a,{md:"10",style:{zIndex:e.zIndex}},i.a.createElement(s.a,{className:"justify-content-md-center",style:{zIndex:e.zIndex}},t)),i.a.createElement(l.a,{md:"1"},i.a.createElement("button",{style:{marginTop:"50%"},onClick:function(){e.deleteRow(e.rownum)}},"Delete row")))}},99:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return I}));var n=a(442),i=a.n(n),l=a(443),s=a(11),r=a(12),o=a(6),m=a(14),c=a(13),p=a(0),g=a.n(p),u=a(416),d=a(26),h=a.n(d),f=a(77),b=a(76),w=a(7),I=(a(189),function(e){Object(m.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChangeTemplate=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.templateLayout,h.a.post(w.REMOTE_HOST+"/templates/savetemplate",{layout:t});case 2:case"end":return e.stop()}}),e)}))),n.swapTemplateItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.lastDraggedRow,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.state.lastDraggedCol,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.state.lastDroppedRow,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.state.lastDroppedCol,l=n.state.templateLayout[e].items[t].img,s=n.state.templateLayout;s[e].items[t].img=n.state.templateLayout[a].items[i].img,s[a].items[i].img=l,n.setState({templateLayout:s})},n.mergeTemplateItems=function(){var e,t,a=n.state.templateLayout[n.state.lastDraggedRow].items[n.state.lastDraggedCol].height,i=n.state.templateLayout[n.state.lastDraggedRow].items[n.state.lastDraggedCol].width,l=n.state.templateLayout[n.state.lastDroppedRow].items[n.state.lastDroppedCol].height,s=n.state.templateLayout[n.state.lastDroppedRow].items[n.state.lastDroppedCol].width,r=Math.min(n.state.lastDraggedRow,n.state.lastDroppedRow),o=Math.max(n.state.lastDraggedRow+a-1,n.state.lastDroppedRow+l-1),m=Math.min(n.state.lastDraggedCol,n.state.lastDroppedCol),c=Math.max(n.state.lastDraggedCol+i-1,n.state.lastDroppedCol+s-1),p=n.state.templateLayout[n.state.lastDraggedRow].items[n.state.lastDraggedCol].img?n.state.templateLayout[n.state.lastDraggedRow].items[n.state.lastDraggedCol].img:n.state.templateLayout[n.state.lastDroppedRow].items[n.state.lastDroppedCol].img,g=n.state.templateLayout;for(e=r;e<=o;e++)for(t=m;t<=c;t++)g[e].items[t].img="",g[e].items[t].exists=e!=r,g[e].items[t].under=[e-r,t-m];g[r].items[m].img=p,g[r].items[m].exists=!0,g[r].items[m].under=null,g[r].items[m].height=o-r+1,g[r].items[m].width=c-m+1,n.setState({templateLayout:g,popupCanMergeSwap:!1,lastClickedRow:r,lastClickedCol:m,lastClickedImg:p})},n.clearLastClicked=function(){n.changeLastImg("")},n.addRow=function(){var e=n.state.templateLayout;e.push({row:e.length,items:[{col:0,width:1,height:1,img:"",exists:!0},{col:1,width:1,height:1,img:"",exists:!0},{col:2,width:1,height:1,img:"",exists:!0},{col:3,width:1,height:1,img:"",exists:!0},{col:4,width:1,height:1,img:"",exists:!0},{col:5,width:1,height:1,img:"",exists:!0}]}),n.setState({templateLayout:e})},n.revertLastSavedTemplate=function(){h.a.get(w.REMOTE_HOST+"/templates/gettemplate").then((function(e){console.log(e),n.setState({templateLayout:e.data})})).catch((function(e){console.log(e)}))},n.resetTemplate=function(){h.a.get(w.REMOTE_HOST+"/templates/getresettemplate").then((function(e){console.log(e),n.setState({templateLayout:e.data})})).catch((function(e){console.log(e)}))},n.deleteRow=function(e){var t,a=n.state.templateLayout;for(t=0;t<6;t++){if(null!=a[e].items[t].under){var i=e-a[e].items[t].under[0],l=t-a[e].items[t].under[1];n.breakAndDeleteLarge(a,i,l)}1==a[e].items[t].height&&1==a[e].items[t].width||n.breakAndDeleteLarge(a,e,t)}for(a.splice(e,1),t=0;t<a.length;t++)a[t].row=t;n.setState({templateLayout:a})},n.breakAndDeleteLarge=function(e,t,a){var n,i,l=t+e[t].items[a].height,s=a+e[t].items[a].width;for(n=t;n<l;n++)for(i=a;i<s;i++)e[n].items[i].img="",e[n].items[i].exists=!0,e[n].items[i].height=1,e[n].items[i].width=1,e[n].items[i].under=null},n.breakInsert=function(){var e=n.state.templateLayout;n.breakAndDeleteLarge(e,n.state.lastClickedRow,n.state.lastClickedCol),n.setState({templateLayout:e,lastClickedLarge:!1})},n.promptMerge=function(e,t,a,i){n.setState({popupIsOpen:!0,popupCanMergeSwap:!0,lastDraggedRow:e,lastDraggedCol:t,lastDroppedRow:a,lastDroppedCol:i})},n.state={templateLayout:e.templateLayout,popupIsOpen:!1,popupCanMergeSwap:!1,lastClickedRow:-1,lastClickedCol:-1,lastClickedImg:"",lastClickedLarge:!1,lastDraggedRow:-1,lastDraggedCol:-1,lastDroppedRow:-1,lastDroppedCol:-1},n.handleChangeTemplate=n.handleChangeTemplate.bind(Object(o.a)(n)),n.swapTemplateItems=n.swapTemplateItems.bind(Object(o.a)(n)),n.mergeTemplateItems=n.mergeTemplateItems.bind(Object(o.a)(n)),n.togglePopupIsOpen=n.togglePopupIsOpen.bind(Object(o.a)(n)),n.clearLastClicked=n.clearLastClicked.bind(Object(o.a)(n)),n.sendClickedInfo=n.sendClickedInfo.bind(Object(o.a)(n)),n.addRow=n.addRow.bind(Object(o.a)(n)),n.resetTemplate=n.resetTemplate.bind(Object(o.a)(n)),n.revertLastSavedTemplate=n.revertLastSavedTemplate.bind(Object(o.a)(n)),n.deleteRow=n.deleteRow.bind(Object(o.a)(n)),n.breakAndDeleteLarge=n.breakAndDeleteLarge.bind(Object(o.a)(n)),n.breakInsert=n.breakInsert.bind(Object(o.a)(n)),n.changeLastImg=n.changeLastImg.bind(Object(o.a)(n)),n.isMergeable=n.isMergeable.bind(Object(o.a)(n)),n.promptMerge=n.promptMerge.bind(Object(o.a)(n)),n}return Object(r.a)(a,[{key:"togglePopupIsOpen",value:function(){this.setState({popupIsOpen:!this.state.popupIsOpen})}},{key:"sendClickedInfo",value:function(e,t,a){var n=this.state.templateLayout[e].items[t].height>1||this.state.templateLayout[e].items[t].width>1;this.setState({lastClickedRow:e,lastClickedCol:t,lastClickedImg:a,lastClickedLarge:n,popupCanMergeSwap:!1})}},{key:"componentWillReceiveProps",value:function(e){this.setState({templateLayout:e.templateLayout})}},{key:"changeLastImg",value:function(e){var t=this.state.templateLayout;t[this.state.lastClickedRow].items[this.state.lastClickedCol].img=e,this.setState({templateLayout:t,lastClickedImg:e})}},{key:"isMergeable",value:function(e,t,a,n){if(null!=this.state.templateLayout[e].items[t].under){var i=this.state.templateLayout[e].items[t].under[0],l=this.state.templateLayout[e].items[t].under[1];e-=i,t-=l}if(null!=this.state.templateLayout[a].items[n].under){i=this.state.templateLayout[a].items[n].under[0],l=this.state.templateLayout[a].items[n].under[1];a-=i,n-=l}var s=this.state.templateLayout[e].items[t].img,r=this.state.templateLayout[a].items[n].img;if(""!=s&&""!=r)return!1;var o,m,c=Math.min(e,a),p=Math.min(t,n),g=Math.max(e+this.state.templateLayout[e].items[t].height-1,a+this.state.templateLayout[a].items[n].height-1),u=Math.max(t+this.state.templateLayout[e].items[t].width-1,n+this.state.templateLayout[a].items[n].width-1);for(o=c;o<=g;o++)for(m=p;m<=u;m++){if(""!=this.state.templateLayout[o].items[m].img&&(o!=e||m!=t)&&(o!=a||m!=n))return!1;if(null!=this.state.templateLayout[o].items[m].under){var d=o-this.state.templateLayout[o].items[m].under[0],h=m-this.state.templateLayout[o].items[m].under[1];if(d<c)return!1;if(h<p)return!1}var f=this.state.templateLayout[o].items[m].height+o-1,b=this.state.templateLayout[o].items[m].width+m-1;if(f>g)return!1;if(b>u)return!1}return!0}},{key:"render",value:function(){var e=this,t=this.state.templateLayout.map((function(t){return g.a.createElement(f.default,{rownum:t.row,rowinfo:t.items,key:t.row,swapTemplateItems:e.swapTemplateItems,togglePopupIsOpen:e.togglePopupIsOpen,sendClickedInfo:e.sendClickedInfo,zIndex:""+(e.state.templateLayout.length-t.row),deleteRow:e.deleteRow,isMergeable:e.isMergeable,promptMerge:e.promptMerge})}));return g.a.createElement("div",null,g.a.createElement("a",{href:"/templatedigitalmemory"},g.a.createElement("button",{style:{border:"none",borderRadius:4,paddingLeft:15,paddingRight:15,paddingTop:5,paddingBottom:5}},"View page")),g.a.createElement("br",null),g.a.createElement("br",null),g.a.createElement("button",{style:{width:"20%",marginLeft:"40%",marginRight:"40%"},onClick:function(){e.handleChangeTemplate()}},"Save current template"),g.a.createElement("br",null),g.a.createElement("button",{style:{width:"20%",marginLeft:"40%",marginRight:"40%"},onClick:function(){e.revertLastSavedTemplate()}},"Revert last saved template"),g.a.createElement("br",null),g.a.createElement("button",{style:{width:"20%",marginLeft:"40%",marginRight:"40%"},onClick:function(){e.resetTemplate()}},"RESET ORIGINAL TEMPLATE"),g.a.createElement("br",null),g.a.createElement(u.a,{fluid:!0},t),g.a.createElement("br",null),g.a.createElement("button",{style:{width:"20%",marginLeft:"40%",marginRight:"40%"},onClick:function(){e.addRow()}},"Add row"),g.a.createElement("br",null),g.a.createElement(b.default,{popupIsOpen:this.state.popupIsOpen,popupCanMergeSwap:this.state.popupCanMergeSwap,togglePopupIsOpen:this.togglePopupIsOpen,lastClickedImg:this.state.lastClickedImg,lastClickedLarge:this.state.lastClickedLarge,clearLastClicked:this.clearLastClicked,changeLastImg:this.changeLastImg,breakInsert:this.breakInsert,swapTemplateItems:this.swapTemplateItems,mergeTemplateItems:this.mergeTemplateItems}))}}]),a}(g.a.Component))}}]);
//# sourceMappingURL=64.bb2b1082.chunk.js.map